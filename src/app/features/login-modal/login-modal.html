<!-- 1. El overlay oscuro que cierra el modal al hacer clic -->
<div class="modal-overlay" (click)="closeModal()">

  <!-- 2. El contenedor del modal (evita que el clic se propague) -->
  <div class="modal-container" (click)="onModalClick($event)">

    <!-- 3. El "flipper" que rota -->
    <div class="modal-flipper" [class.is-flipped]="isRegisterView()">

      <!-- =================== -->
      <!--      CARA FRONTAL: LOGIN      -->
      <!-- =================== -->
      <div class="modal-face modal-front">

        <!-- Lado del Formulario -->
        <div class="form-side">
          <h3>Iniciar Sesión</h3>
          <p>Bienvenido de nuevo a Nexus Chat.</p>

          <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
            <div class="form-group">
              <label for="login-email">Email</label>
              <input id="login-email" type="email" formControlName="correo" placeholder="tu@email.com">
            </div>
            <div class="form-group">
              <label for="login-password">Contraseña</label>
              <input id="login-password" type="password" formControlName="password" placeholder="••••••••">
            </div>

            <p *ngIf="errorMessage()" class="error-message">{{ errorMessage() }}</p>

            <button type="submit" class="submit-btn" [disabled]="loginForm.invalid">Entrar</button>
          </form>

          <p class="toggle-link">
            ¿No tienes cuenta? <a (click)="toggleView()">Regístrate</a>
          </p>
          <p class="app-version">v{{ appVersion }}</p>
        </div>

        <!-- Lado Visual (con logo y GIFs) -->
        <div class="visual-side">
          <img src="logoNCv2.png" alt="Nexus Chat Logo" class="modal-logo">
          <h4>Conéctate con tu mundo</h4>
          <!-- Aquí irían tus GIFs -->
          <div>
            <img src="loginimage.png" alt="logoimagen" class="img-placeholder">
          </div>
        </div>

      </div>

      <!-- ==================== -->
      <!--  CARA TRASERA: REGISTER  -->
      <!-- ==================== -->
      <div class="modal-face modal-back">

        <!-- Lado del Formulario -->
        <div class="form-side">
          <h3>¡Únete a la conversación!</h3>


          <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
            <div class="form-group">
              <label for="reg-name">Nombre</label>
              <input id="reg-name" type="text" formControlName="nombreUsuario" placeholder="Tu Nombre">
            </div>
            <div class="form-group">
              <label for="reg-email">Email</label>
              <input id="reg-email" type="email" formControlName="correo" placeholder="tu@email.com">
            </div>
            <div class="form-group">
              <label for="reg-password">Contraseña</label>
              <input id="reg-password" type="password" formControlName="password" placeholder="Mínimo 6 caracteres">
            </div>

            <p *ngIf="errorMessage()" class="error-message">{{ errorMessage() }}</p>

            <button type="submit" class="submit-btn" [disabled]="registerForm.invalid">Registrarse</button>
          </form>

          <p class="toggle-link">
            ¿Ya tienes cuenta? <a (click)="toggleView()">Inicia Sesión</a>
          </p>
          <p class="app-version">v{{ appVersion }}</p>
        </div>

        <!-- Lado Visual (es el mismo) -->
        <div class="visual-side">
          <img src="logoNCv2.png" alt="Nexus Chat Logo" class="modal-logo">
          <h4>Conéctate con tu mundo</h4>
          <div>
            <img src="registerimage.png" alt="logoimagen" class="img-placeholder">
          </div>
        </div>

      </div>

    </div>
  </div>
</div>